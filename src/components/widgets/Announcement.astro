---
import { Icon } from 'astro-icon/components';
import { languages } from '~/i18n/ui';
import { getLangFromUrl, getRouteFromUrl, useTranslatedPath, useTranslations } from '~/utils/i18n';

const language = getLangFromUrl(Astro.url);
const route = getRouteFromUrl(Astro.url);
const translatePath = useTranslatedPath(language);
const t = useTranslations(language);
---

<div
  class="px-4 wg-announcement dark text-white text-[13px] bg-black dark:bg-transparent
  dark:border-b dark:border-slate-800 dark:text-slate-400 flex items-center gap-1 overflow-hidden py-2 relative text-ellipsis whitespace-nowrap sticky top-0 z-40 h-[36px]"
>
  <a
    title="Whatsapp"
    class="mr-0.5 inline-block"
    target="_blank"
    rel="nofollow"
    href="https://wa.me/+34665331271"
  >
    <Icon name="tabler:brand-whatsapp"  class={'text-[#25D366] w-[20px] h-[20px]'} />
  </a>
  <a href="tel:+34665331271" class="text-white hover:underline dark:text-slate-200 px-2">665 33 12 71</a>
  <a href="mailto:info@gilsys.com" class="text-white hover:underline dark:text-slate-200">info@gilsys.com</a>

  <div class="ml-auto">
    {
      Object.keys(languages).map((lang) => (
        <a
          class:list={['mx-2 inline-block uppercase', { 'font-bold': language === lang }]}
          title={`${t('language.change_to')} ${t(`language.${lang}`)}`}
          href={translatePath(`${route}`, lang) || translatePath('home', lang)}
        >
          {lang}
        </a>
      ))
    }
  </div>
</div>